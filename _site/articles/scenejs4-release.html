<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>SceneJS v4.0 Released &#8211; xeolabs</title>
<meta name="description" content="More rendering capabilities!">
<meta name="keywords" content="scenejs, releases">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xeolabs.com/images/">
<meta name="twitter:title" content="SceneJS v4.0 Released">
<meta name="twitter:description" content="More rendering capabilities!">
<meta name="twitter:creator" content="@xeolabs">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="SceneJS v4.0 Released">
<meta property="og:description" content="More rendering capabilities!">
<meta property="og:url" content="http://xeolabs.com/articles/scenejs4-release">
<meta property="og:site_name" content="xeolabs">





<link rel="canonical" href="http://xeolabs.com/articles/scenejs4-release">
<link href="http://xeolabs.com/feed.xml" type="application/atom+xml" rel="alternate" title="xeolabs Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://xeolabs.com/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://xeolabs.com/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://xeolabs.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon-32x32.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://xeolabs.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://xeolabs.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://xeolabs.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://xeolabs.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://xeolabs.com/">xeolabs</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="http://xeolabs.com/index" >About</a></li>
		        
				<li><a href="http://xeolabs.com/articles" >Blog</a></li>
		        
				<li><a href="http://xeolabs.com/portfolio" >Portfolio</a></li>
		        
				<li><a href="http://xeolabs.com/pdfs/lindsaykay_resume_2019.pdf" >Resume</a></li>
		        
				<li><a href="http://linkedin.com/in/lindsaystanleykay" target="_blank">LinkedIn</a></li>
		        
				<li><a href="http://xeolabs.com/contact" >Contact</a></li>
		        
				<li><a href="http://xeogl.org" target="_blank">xeogl</a></li>
		        
				<li><a href="http://xeokit.io" target="_blank">xeokit</a></li>
		        

		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-top">
    <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D Web Software Engineer</i></p>
<a href="http://twitter.com/xeolabs" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">SceneJS v4.0 Released</h1>
        <p style="font-weight:bold; font-style:italic;"><time datetime="2014-09-26T00:00:00+00:00" itemprop="datePublished">September 26, 2014</time></p>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <section id="table-of-contents" class="toc">
  <header>
    <h3>Contents</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#postproccessing-effects" id="markdown-toc-postproccessing-effects">Postproccessing effects</a></li>
  <li><a href="#multipass-rendering" id="markdown-toc-multipass-rendering">Multipass rendering</a></li>
  <li><a href="#procedural-textures" id="markdown-toc-procedural-textures">Procedural textures</a></li>
  <li><a href="#reflection-mapping" id="markdown-toc-reflection-mapping">Reflection mapping</a></li>
  <li><a href="#optimisations-by-nvidia" id="markdown-toc-optimisations-by-nvidia">Optimisations by NVIDIA</a></li>
  <li><a href="#texture-node-changes" id="markdown-toc-texture-node-changes">Texture node changes</a></li>
  <li><a href="#plugin-renamings" id="markdown-toc-plugin-renamings">Plugin renamings</a></li>
  <li><a href="#new-examples-browser" id="markdown-toc-new-examples-browser">New examples browser</a></li>
  <li><a href="#post-release" id="markdown-toc-post-release">Post-release</a></li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<p><a href="https://github.com/xeolabs/scenejs/releases/tag/v4.0">SceneJS v4.0</a> adds:</p>

<ul>
  <li>custom effects pipelines (AKA postprocessing),</li>
  <li>multi-pass rendering,</li>
  <li>procedural textures,</li>
  <li>reflection maps,</li>
  <li>a bunch of sweet performance optimizations by NVIDIA,</li>
  <li>a change to texture nodes (which unfortunately breaks backwards compatibility),</li>
  <li>renamings of some plugins, and</li>
  <li>a new <a href="http://scenejs.org/examples/index.html#scenegraph_firstExample">examples browser</a>.</li>
</ul>

<p>I’m going to write more tutorials on these new features at some point, but hopefully the examples will help for now.</p>

<h2 id="postproccessing-effects">Postproccessing effects</h2>

<p>SceneJS 4.0 lets you build effects pipelines of virtually unlimited complexity. You can render portions of your scene to
colour and depth <em>render targets</em>, which you then apply as textures, or feed into custom shaders in other parts of your scene.
In the example below, I’m doing a <em>depth-of-field</em> postprocessing effect by rendering the scene to colour and depth targets, then
piping those targets into a second stage where we render the colour target to a screen-aligned quad, while blurring each pixel
in proportion to its value in the depth buffer.</p>

<iframe width="560" height="315" src="//www.youtube.com/embed/HNsJ7j6XZJU" frameborder="0" allowfullscreen=""></iframe>
<p><br />
<a href="http://scenejs.org/examples/index.html#postprocessing_depthOfField">Run this demo</a>
<br /><br />I’ve implemented a few postprocessing effects as node types that you can just drop into your scene:</p>

<ul>
  <li><a href="http://scenejs.org/examples/index.html#postprocessing_depthOfField_autofocus">Depth-of-field</a></li>
  <li><a href="http://scenejs.org/examples/index.html#postprocessing_blur">Blur</a></li>
  <li><a href="http://scenejs.org/examples/index.html#postprocessing_scanlines">Scanlines</a></li>
  <li><a href="http://scenejs.org/examples/index.html#postprocessing_sepia">Sepia</a></li>
  <li><a href="http://scenejs.org/examples/index.html#postprocessing_technicolor">Technicolor</a></li>
</ul>

<p>Stay tuned - I’ll do a few more soon, such as a <em>bloom filter</em> and maybe <em>motion blur</em>.</p>

<h2 id="multipass-rendering">Multipass rendering</h2>

<p>SceneJS v4.0 also supports <em>multi-pass</em> rendering, where you can configure the scene to render multiple passes per frame,
while updating scene state for each pass. This is really useful for stereoscopic effects like Anaglyph 3D, where we render
one pass to the green-blue color channels with camera looking through the left eye, and a second pass to the red channel
 with the camera looking through the right eye.</p>

<iframe width="560" height="315" src="//www.youtube.com/embed/WQ5FOA1V40o?list=PLZKDjaM3SUtcBMa-CtxT8WCI_mCF2VGpD" frameborder="0" allowfullscreen=""></iframe>
<p><br />
<a href="http://scenejs.org/examples/index.html#effects_anaglyph">Run this demo</a>
<br /><br />
Oculus Rift support didn’t make it into this release unfortunately (I don’t actually have a Rift device, so need a bit more time to
  tweak things).</p>

<h2 id="procedural-textures">Procedural textures</h2>

<p>Now that we can render portions of our scenes to render targets, then apply those as textures, we can generate textures using shaders lifted straight off
GLSL sharing sites like <a href="http://shadertoy.com">ShaderToy</a> and <a href="http://glslsandbox.com">GLSL Sandbox</a>. Check this one out, copied from GLSL Sandbox:</p>

<iframe width="420" height="315" src="//www.youtube.com/embed/1I71UWg1Wmg?rel=0" frameborder="0" allowfullscreen=""></iframe>
<p><br />
<a href="http://scenejs.org/examples/index.html#texture_procedural_color_water">Run this demo</a>
<br /><br /></p>

<h2 id="reflection-mapping">Reflection mapping</h2>

<p>SceneJS v4.0 now supports reflection mapping, a feature that was actually in <em>alpha</em> status in
the previous version. Check out <a href="/articles/scenejs-reflection">this tutorial</a> for more info. <br /><br />
<a href="http://scenejs.org/examples.html?page=cubeMap"><img src="http://xeolabs.com/images/scenejs/reflectionLayered.jpg" alt="Reflection Example 1" /></a>
<br /><br />
<a href="http://scenejs.org/examples.html?page=cubeMap">Run this demo</a>
<br /><br /></p>

<h2 id="optimisations-by-nvidia">Optimisations by NVIDIA</h2>

<p><a href="http://www.oletus.fi/">Olli Etuaho</a> from NVIDIA has made some valuable optimizations:</p>

<ul>
  <li><a href="http://blog.tojicode.com/2012/10/oesvertexarrayobject-extension.html">Vertex Array Objects (VAO)</a></li>
  <li><a href="http://blog.tojicode.com/2011/05/interleaved-array-basics.html">Vertex interleaving</a></li>
  <li>Reduced unnecessary uniform reloading</li>
</ul>

<p>These are primarily aimed at making SceneJS render faster on mobile, GPU-bound devices, and Olli reports as much as a
45% speedup on Tegra-based devices with some scenes! He’s also done some optimisations to <a href="http://threejs.org">THREE.js</a> as well, so props to Olli on that.</p>

<h2 id="texture-node-changes">Texture node changes</h2>

<p>Besides some plugin renamings (see below), the only breakage in backward compatibility in this release (hence the major version change) is with the <strong>texture</strong> node,
as shown below. Previously, the texture node had a <strong>layers</strong> property, in which we could specify one or more texture layers.
Now in v4.0 we specify layers as individual nested texture nodes, which makes updating properties on the layers much cleaner.
When we want to update a layer’s blend factor, for example, we get the texture for the layer and set that property on the node,
without having to specify a layer index as we did before.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Create scene</span>
<span class="kd">var</span> <span class="nx">myScene</span> <span class="o">=</span> <span class="nx">SceneJS</span><span class="p">.</span><span class="nx">createScene</span><span class="p">({</span>
    <span class="na">nodes</span><span class="p">:</span> <span class="p">[</span>

        <span class="c1">// Superman color map in layer #1</span>
        <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="s2">"texture"</span><span class="p">,</span>
            <span class="na">id</span><span class="p">:</span> <span class="s2">"texture1"</span><span class="p">,</span>
            <span class="na">src</span><span class="p">:</span> <span class="s2">"textures/superman.jpg"</span><span class="p">,</span>
            <span class="na">applyTo</span><span class="p">:</span> <span class="s2">"color"</span><span class="p">,</span>

            <span class="na">nodes</span><span class="p">:</span> <span class="p">[</span>

                <span class="c1">// General Zod color map in layer #2</span>
                <span class="p">{</span>
                    <span class="na">type</span><span class="p">:</span> <span class="s2">"texture"</span><span class="p">,</span>
                    <span class="na">id</span><span class="p">:</span> <span class="s2">"texture2"</span><span class="p">,</span>
                    <span class="na">src</span><span class="p">:</span> <span class="s2">"textures/zod.jpg"</span><span class="p">,</span>
                    <span class="na">applyTo</span><span class="p">:</span> <span class="s2">"color"</span><span class="p">,</span>
                    <span class="na">blendFactor</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>

                    <span class="na">nodes</span><span class="p">:</span> <span class="p">[</span>

                        <span class="c1">// Box primitive</span>
                        <span class="p">{</span>
                            <span class="na">type</span><span class="p">:</span> <span class="s2">"geometry/box"</span>
                        <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">});</span>

<span class="nx">myScene</span><span class="p">.</span><span class="nx">getNode</span><span class="p">(</span><span class="s2">"texture2"</span><span class="p">,</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">texture2</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">myTexture</span><span class="p">.</span><span class="nx">setBlendFactor</span><span class="p">(</span><span class="mf">0.7</span><span class="p">);</span>
        <span class="p">});</span></code></pre></figure>

<p>The old texture node with the <strong>layers</strong> property will hang around for the next couple of versions, and now has
type <strong>“_texture”</strong>. The leading underscore indicates that node is deprecated. To make existing application code work
with SceneJS v4.0, just do a search-and-replace, replacing “texture” with “_texture”.</p>

<h2 id="plugin-renamings">Plugin renamings</h2>

<p>I’ve tidied up the names of a few plugins, which define non-core node types:</p>

<table>
  <thead>
    <tr>
      <th>v3.2</th>
      <th> </th>
      <th>v4.0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>prims/box</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_box">geometry/box</a></td>
    </tr>
    <tr>
      <td>prims/cylinder</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_cylinder">geometry/cylinder</a></td>
    </tr>
    <tr>
      <td>prims/grid</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_grid">geometry/grid</a></td>
    </tr>
    <tr>
      <td>prims/heightmap</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_heightmap">geometry/heightmap</a></td>
    </tr>
    <tr>
      <td>prims/plane</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_plane">geometry/plane</a></td>
    </tr>
    <tr>
      <td>prims/quad</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_quad">geometry/quad</a></td>
    </tr>
    <tr>
      <td>prims/sphere</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_sphere">geometry/sphere</a></td>
    </tr>
    <tr>
      <td>prims/teapot</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_teapot">geometry/teapot</a></td>
    </tr>
    <tr>
      <td>prims/torus</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_torus">geometry/torus</a></td>
    </tr>
    <tr>
      <td>prims/vectorText</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#geometry_vectorText">geometry/vectorText</a></td>
    </tr>
    <tr>
      <td>objects/vehicles/tank</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#models_vehicles_tank">models/vehicles/tank</a></td>
    </tr>
    <tr>
      <td>objects/space/planets/earth</td>
      <td>-&gt;</td>
      <td><a href="http://scenejs.org/examples/index.html#models_space_earth">models/space/planets/earth</a></td>
    </tr>
  </tbody>
</table>

<h2 id="new-examples-browser">New examples browser</h2>

<p>And finally - a <a href="http://scenejs.org/examples/index.html#scenegraph_firstExample">new examples browser</a> based on the one
used over at THREE.js. Hopefully it doesn’t look too similar - I may have to style it a bit more.</p>

<h2 id="post-release">Post-release</h2>

<p>A few things didn’t make it into this release, but I’ll be putting them into minor version releases over the next few weeks:</p>

<ul>
  <li>Normal mapping</li>
  <li>Oculus Rift</li>
  <li>Tutorials on all this stuff!</li>
</ul>

<p>Anything I missed? Add a comment at the bottom of this page and I’ll fix it up.</p>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D Web Software Engineer</i></p>
<a href="http://twitter.com/xeolabs" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

        </div>
        <p class="byline"><strong>SceneJS v4.0 Released</strong> was published on <time datetime="2014-09-26T00:00:00+00:00" itemprop="datePublished">September 26, 2014</time> and last modified on <time datetime="2014-07-24" itemprop="dateModified">July 24, 2014</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://xeolabs.com/about" title="About xeolabs" itemprop="url">xeolabs</a></span></span>.</p>
      </footer>

        <!---->
        <!--<br><br>-->
        <!--<div id="disqus_thread"></div>-->
        <!--<script type="text/javascript">-->
            <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
            <!--var disqus_shortname = 'xeographics'; // required: replace example with your forum shortname-->

            <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
            <!--(function() {-->
                <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
            <!--})();-->
        <!--</script>-->
        <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
        <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
        <!---->
    </div><!-- /.article-wrap -->
  </article>

</div><!-- /#main -->


<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://xeolabs.com/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
      
    
      
      
      
    
      
      
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2020 xeolabs. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery-1.9.1.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery.gifplayer.js"></script>-->
<!--<link rel="stylesheet" href="http://xeolabs.com/assets/css/gifplayer.css" />-->
<!--<script src="http://xeolabs.com/assets/js/scripts.min.js"></script>-->


<!--<script>-->
    <!--$(document).ready( function(){-->
        <!--$('.gifplayer').gifplayer();-->
    <!--});-->
<!--</script>-->



</body>
</html>
