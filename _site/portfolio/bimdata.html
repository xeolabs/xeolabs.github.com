<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>BIMData.IO Online 3D BIM Viewer &#8211; xeolabs</title>
<meta name="description" content="Built the 3D BIM viewer for <b>BIMData.io</b>, a cutting-edge platform to manage your construction projects that provides an all-in-one solution to visualize, check, edit and share building information.">
<meta name="keywords" content="xeogl, bimdata, BIM, IFC, webgl">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xeolabs.com/images/">
<meta name="twitter:title" content="BIMData.IO Online 3D BIM Viewer">
<meta name="twitter:description" content="Built the 3D BIM viewer for <b>BIMData.io</b>, a cutting-edge platform to manage your construction projects that provides an all-in-one solution to visualize, check, edit and share building information.">
<meta name="twitter:creator" content="@xeolabs">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="BIMData.IO Online 3D BIM Viewer">
<meta property="og:description" content="Built the 3D BIM viewer for <b>BIMData.io</b>, a cutting-edge platform to manage your construction projects that provides an all-in-one solution to visualize, check, edit and share building information.">
<meta property="og:url" content="http://xeolabs.com/portfolio/bimdata">
<meta property="og:site_name" content="xeolabs">





<link rel="canonical" href="http://xeolabs.com/portfolio/bimdata">
<link href="http://xeolabs.com/feed.xml" type="application/atom+xml" rel="alternate" title="xeolabs Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://xeolabs.com/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://xeolabs.com/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://xeolabs.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon-32x32.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://xeolabs.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://xeolabs.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://xeolabs.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://xeolabs.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://xeolabs.com/">xeolabs</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="http://xeolabs.com/index" >About</a></li>
		        
				<li><a href="http://xeolabs.com/articles" >Blog</a></li>
		        
				<li><a href="http://xeolabs.com/portfolio" >Portfolio</a></li>
		        
				<li><a href="http://xeolabs.com/pdfs/lindsaykay_resume_2019.pdf" >Resume</a></li>
		        
				<li><a href="http://linkedin.com/in/lindsaystanleykay" target="_blank">LinkedIn</a></li>
		        
				<li><a href="http://xeolabs.com/contact" >Contact</a></li>
		        
				<li><a href="http://xeogl.org" target="_blank">xeogl</a></li>
		        
				<li><a href="http://xeokit.io" target="_blank">xeokit</a></li>
		        

		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-top">
    <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D Web Software Engineer</i></p>
<a href="http://twitter.com/xeolabs" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">BIMData.IO Online 3D BIM Viewer</h1>
        <p style="font-weight:bold; font-style:italic;"><time datetime="2018-06-28T00:00:00+00:00" itemprop="datePublished">June 28, 2018</time></p>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>In 2018, I worked remotely with the <strong><a href="https://www.bimdata.io/fr/la-team/">BIMData development team</a></strong> in Lyon, France, to develop the WebGL-based 3D viewer
component of the BIMData online building information modeling (BIM) platform.
<br /><br />
We developed the viewer on <strong><a href="http://xeogl.org">xeogl</a></strong>, an open source WebGL library I created for developing 
3D model visualization applications in Web browsers without using plugins.
<br /><br />
In this article, I’ll describe some of the features that I implemented within the viewer.
<br /><br /></p>

<p><a href="http://www.bimdata.io/en/bim-data-en/"><img src="http://xeolabs.com/images/bimdata/bimdata.png" alt="" /></a></p>

<h1 id="contents">Contents</h1>

<ul>
  <li><a href="#background">Background</a></li>
  <li><a href="#the-client">The Client</a></li>
  <li><a href="#requirements">Requirements</a></li>
  <li><a href="#solution">Solution</a>
    <ul>
      <li><a href="#using-xeogl">Using xeogl</a></li>
      <li><a href="#sub-contracting">Sub-contracting</a></li>
      <li><a href="#application-architecture">Application architecture</a></li>
      <li><a href="#gltf-geometry-pipeline">glTF geometry pipeline</a>
        <ul>
          <li><a href="#geometry-compression-and-batching">Geometry compression and batching</a></li>
        </ul>
      </li>
      <li><a href="#user-annotations">User annotations</a></li>
      <li><a href="#cross-section-views">Cross-section views</a></li>
      <li><a href="#viewcube-camera-controller">ViewCube camera controller</a></li>
      <li><a href="#isolated-object-view">Isolated object view</a></li>
      <li><a href="#emphasis-effects">Emphasis effects</a></li>
      <li><a href="#measurement-tools">Measurement tools</a>
        <ul>
          <li><a href="#simple-distance">Simple distance</a></li>
        </ul>
      </li>
      <li><a href="#camera-navigation">Camera navigation</a></li>
      <li><a href="#bcf">BCF</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h1 id="background">Background</h1>

<p><strong>BIM</strong> is a process involving the generation and management of digital representations of physical and functional characteristics 
of buildings, usually while constructing them.
<br /><br /> 
<strong>WebGL</strong> is is a JavaScript API for rendering interactive 2D and 3D graphics within any compatible web browser, without 
the use of plug-ins. While IFC viewers are typically written as desktop applications, using the likes of OpenGL or DirectX, writing them
 on WebGL gives us the advantage of being able to view them on the web. 
 <br /><br />
 With IFC visualization, the main challenge is how to engineer a WebGL-based viewer that’s able to render huge quantities 
 of objects within the memory and execution constraints of the browser. After all, IFC models often contain an individual 
 element for every single fire sprinkler, electrical fitting, light panel, and so on.</p>

<h1 id="the-client">The Client</h1>

<p><strong><a href="http://www.bimdata.io/en/bim-data-en/">BIMData</a></strong> is a company in Lyon, France that provides a cutting-edge online 
BIM platform to manage your construction projects, including an all-in-one solution to visualize, check, edit and share 
building information.
<br /><br />
One of the coolest things about this platform is that it’s continuously up-to-date with the latest
version of IFC (IFC2x3, IFC4 and IFC4.1).</p>

<h1 id="requirements">Requirements</h1>

<ul>
  <li>Implement a WebGL-based viewer in JavaScript, to view large 3D IFC models in Web browsers, without plugins</li>
  <li>Load IFC models from glTF</li>
  <li>Emphasise and reveal objects using ghosting, wireframing and highlighting</li>
  <li>Ability to annotate models with 3D labels</li>
  <li>Cross section views</li>
  <li>Isolated object views</li>
  <li>Measurement tools, to find areas and distances within models</li>
  <li>A camera navigation gizmo similar to AutoDesk ViewCube</li>
  <li>Orbit, first-person and walk-through navigation modes</li>
  <li>Ability to capture and share views via BCF format</li>
</ul>

<h1 id="solution">Solution</h1>

<h3 id="using-xeogl">Using xeogl</h3>

<p>I implemented the BIMData viewer as a wrapper around <strong><a href="http://xeogl.org">xeogl</a></strong>, which is an open source library I created for WebGL-based visualization.
 <br /><br />
 xeogl is also used in other commercial projects and is starting to receive contributions from other developers. This means 
 that improvements and optimizations that we make to xeogl for those projects will also benefit the BIMData platform.
 <br /><br />
Being geared to engineering visualization, xeogl supports many of this project’s requirements out-of-the-box. For the more 
  application-specific requirements, I extended it with proprietary components, for things like custom camera 
  controls and interaction widgets.</p>

<h3 id="sub-contracting">Sub-contracting</h3>

<p>For this job I sub-contracted <a href="http://www.derschmale.com/">David Lenaerts</a>, a freelance graphics programmer, to help out with 
the math for 3D gizmo interactions. I’d recommend David to any developer who needs help with their WebGL projects.</p>

<h3 id="application-architecture">Application architecture</h3>

<p>Our viewer is a facade class that wraps xeogl in a set of application-specific functions, with a plugin architecture 
 into which we can incrementally add tools and gizmos.
 <br /><br />
 <img src="http://xeolabs.com/images/bimdata/uml.png" alt="" />
<br /><br />
This plugin architecture enabled us to deploy the core functionality of the viewer as soon as it was ready, then deploy 
 various tools and gizmos incrementally, as we developed them.</p>

<h3 id="gltf-geometry-pipeline">glTF geometry pipeline</h3>

<p>We’re using <a href="https://www.khronos.org/gltf/">glTF</a> as the file format for our IFC models.  Within the viewer, we’re 
loading glTF into the 3D scene using xeogl’s <a href="http://xeogl.org/docs/classes/GLTFModel.html">GLTFModel</a> components.</p>

<h4 id="geometry-compression-and-batching">Geometry compression and batching</h4>

<p>glTF gives us options for geometry compression, such as attribute quantization, in which floating-point geometry arrays are 
compressed into integers, then decompressed on-the-fly within the WebGL vertex shader. This gives us smaller glTF files, a smaller 
viewer memory footprint and reduced usage of GPU bandwidth. 
<br /><br />
When the glTF geometry is not quantized, then xeogl automatically quantizes it while loading. At the same time, xeogl also 
automatically combines geometries from multiple objects into the same vertex buffer objects (VBOs), in order to reduce the number of 
VBO binds per frame. This enables us to render models up to around 200k+ objects.</p>

<blockquote>
  <p>For the next version of xeogl (v0.9), I’m currently adding geometry batching in combination with 
instancing (using the ANGLE_instanced_arrays extension), which will enable BIMData to load millions of objects.</p>
</blockquote>

<h3 id="information-manager">Information Manager</h3>

<p>The BIMData platform is a complete information management platform that’s able to provide specific
information about any model elements that you select within the 3D view.
<br /><br />
Within the viewer, I integrated xeogl’s picking mechanism to get the ID of any object that you click on,
which the information manager UI then uses to populate itself from the model’s IFC data.</p>

<p><br /><br />
<img src="http://xeolabs.com/images/bimdata/infoManager.png" alt="" /></p>

<h3 id="user-annotations">User annotations</h3>

<p>Annotations are notes that users pin to the surface of models. Our annotations are based on xeogl’s experimental 
<a href="http://xeogl.org/docs/classes/Annotation.html">Annotation</a> components. 
<br /><br />
These are able to automatically hide themselves whenever something else occludes them in the 3D view. 
<br /><br />
<img src="http://xeolabs.com/images/bimdata/annotations.gif" alt="" /></p>

<h3 id="cross-section-views">Cross-section views</h3>

<p>Our users can create an unlimited number of cross-section planes, which they can arrange using mouse and touch input.
<br /><br />
Under the hood, our cross-section planes use xeogl’s <a href="http://xeogl.org/docs/classes/Clip.html">Clip</a> components, 
which users can interactively arrange using our fancy repositioning gizmo. That was one of the bits 
that <a href="http://www.derschmale.com/">David Lenaerts</a> helped out with.
<br /><br />
<img src="http://xeolabs.com/images/bimdata/clipping.gif" alt="" /></p>

<h3 id="viewcube-camera-controller">ViewCube camera controller</h3>

<p>Our <em>ViewCube</em> is a 3D camera orientation indicator and controller, which works the same as the 
one by Autodesk Research. Ours is a 3D gizmo I implemented on xeogl, with clickable hotspots that fly the camera 
to various vantage points. 
<br /><br />
<img src="http://xeolabs.com/images/bimdata/viewCube.gif" alt="" /></p>

<h3 id="isolated-object-view">Isolated object view</h3>

<p>WIP</p>

<h3 id="emphasis-effects">Emphasis effects</h3>

<p>xeogl has some built-in emphasis effects, such as ghosting and wireframe. We’re using those for highlighting and 
revealing BIM objects. 
<br /><br />
<img src="http://xeolabs.com/images/bimdata/highlight.gif" alt="" />
<br /><br />
Edge emphasis and ghosting effects for X-ray view:
<br /><br />
<img src="http://xeolabs.com/images/bimdata/ghosting.gif" alt="" /></p>

<h3 id="measurement-tools">Measurement tools</h3>

<p>Our viewer has a bunch of tools to measure distances, angles and areas.</p>

<h4 id="simple-distance">Simple distance</h4>

<p>Using the distance measurement tool, users can select a pair of points on the surfaces of objects and get the direct 
distance between them, as well as the distance on each of the X,Y and Z axis individually. Under the hood, this tool 
uses xeogl’s 3D picking mechanism, while the distance tool itself is rendered using HTML elements layered over the WebGL canvas.
<br /><br />
<img src="http://xeolabs.com/images/bimdata/measureDistance.gif" alt="" /></p>

<h3 id="camera-navigation">Camera navigation</h3>

<p>Camera navigation uses a custom xeogl component that allows users to control the camera with mouse and touch input. With our 
 navigation component, users can orbit a point-of-interest, fly to selected objects, navigate in first-person mode, and “walk” 
 to a point that they click on.</p>

<p>TODO: animated gif</p>

<h3 id="bcf">BCF</h3>

<p>The BIM Collaboration Format (BCF) is an open file format that supports workflow communication in BIM processes.
<br /><br />
Our BCF system captures the complete visual state of the viewer as a JSON BCF record, that contains all the 
relevant viewer state, such as object visibilities and emphasis appearance, camera position, cross-section planes, 
annotations, as well as PNG snapshot image of the canvas.
<br /><br />
Users can capture a BCF record of the viewer state, to indicate an issue within a model, then share that with other users, 
 who can then load that view to see what the problem is.
<br /><br />
 <img src="http://xeolabs.com/images/bimdata/bcf.gif" alt="" /></p>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D Web Software Engineer</i></p>
<a href="http://twitter.com/xeolabs" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

        </div>
        <p class="byline"><strong>BIMData.IO Online 3D BIM Viewer</strong> was published on <time datetime="2018-06-28T00:00:00+00:00" itemprop="datePublished">June 28, 2018</time> and last modified on <time datetime="2018-19-09" itemprop="dateModified">2018-19-09</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://xeolabs.com/about" title="About xeolabs" itemprop="url">xeolabs</a></span></span>.</p>
      </footer>

        <!---->
        <!--<br><br>-->
        <!--<div id="disqus_thread"></div>-->
        <!--<script type="text/javascript">-->
            <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
            <!--var disqus_shortname = 'xeographics'; // required: replace example with your forum shortname-->

            <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
            <!--(function() {-->
                <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
            <!--})();-->
        <!--</script>-->
        <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
        <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
        <!---->
    </div><!-- /.article-wrap -->
  </article>

</div><!-- /#main -->


<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://xeolabs.com/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/openproject" title="OpenProject BIM Viewer">OpenProject BIM Viewer</a></li>
      
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/xeokit" title="xeokit - 3D SDK for browser-based BIM and CAD">xeokit - 3D SDK for browser-based BIM and CAD</a></li>
      
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/biodigital-human" title="The BioDigital Human">The BioDigital Human</a></li>
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2020 xeolabs. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery-1.9.1.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery.gifplayer.js"></script>-->
<!--<link rel="stylesheet" href="http://xeolabs.com/assets/css/gifplayer.css" />-->
<!--<script src="http://xeolabs.com/assets/js/scripts.min.js"></script>-->


<!--<script>-->
    <!--$(document).ready( function(){-->
        <!--$('.gifplayer').gifplayer();-->
    <!--});-->
<!--</script>-->



</body>
</html>
