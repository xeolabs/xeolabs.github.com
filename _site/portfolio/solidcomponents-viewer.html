<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>SolidComponents™ Online CAD Viewer &#8211; xeolabs</title>
<meta name="description" content="Developed the 3D CAD viewer within the <b>SolidComponents™</b> online product catalog.">
<meta name="keywords" content="webgl, 3DXML, SolidWorks, CAD, xeogl">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://xeolabs.com/images/">
<meta name="twitter:title" content="SolidComponents™ Online CAD Viewer">
<meta name="twitter:description" content="Developed the 3D CAD viewer within the <b>SolidComponents™</b> online product catalog.">
<meta name="twitter:creator" content="@xeolabs">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="SolidComponents™ Online CAD Viewer">
<meta property="og:description" content="Developed the 3D CAD viewer within the <b>SolidComponents™</b> online product catalog.">
<meta property="og:url" content="http://xeolabs.com/portfolio/solidcomponents-viewer">
<meta property="og:site_name" content="xeolabs">





<link rel="canonical" href="http://xeolabs.com/portfolio/solidcomponents-viewer">
<link href="http://xeolabs.com/feed.xml" type="application/atom+xml" rel="alternate" title="xeolabs Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://xeolabs.com/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="http://xeolabs.com/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://xeolabs.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://xeolabs.com/favicon-32x32.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://xeolabs.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://xeolabs.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://xeolabs.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://xeolabs.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://xeolabs.com/">xeolabs</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="http://xeolabs.com/index" >About</a></li>
		        
				<li><a href="http://xeolabs.com/articles" >Blog</a></li>
		        
				<li><a href="http://xeolabs.com/portfolio" >Portfolio</a></li>
		        
				<li><a href="http://xeolabs.com/pdfs/lindsaykay_resume_2019.pdf" >Resume</a></li>
		        
				<li><a href="http://linkedin.com/in/lindsaystanleykay" target="_blank">LinkedIn</a></li>
		        
				<li><a href="http://xeolabs.com/contact" >Contact</a></li>
		        
				<li><a href="http://xeogl.org" target="_blank">xeogl</a></li>
		        
				<li><a href="http://xeokit.io" target="_blank">xeokit</a></li>
		        

		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <div class="article-author-top">
    <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D software engineer / WebGL developer</i></p>
<a href="http://twitter.com/xeolabs" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

  </div>
  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      <h1 itemprop="name">SolidComponents™ Online CAD Viewer</h1>
        <p style="font-weight:bold; font-style:italic;"><time datetime="2018-06-11T00:00:00+00:00" itemprop="datePublished">June 11, 2018</time></p>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap" itemprop="text">
      <p>In 2018, I worked remotely with <strong><a href="https://www.solidcomponents.com">SolidComponents™</a></strong> in Halmstad, Sweden, to develop 
the WebGL-based 3D CAD viewer within their online engineering components catalog.
<br /><br />
We developed the CAD viewer on <strong><a href="http://xeogl.org">xeogl</a></strong>, an open source WebGL library I created for developing 
3D model visualization applications in Web browsers without using plugins.
<br /><br />
In this article, I’ll describe some of the features that I implemented within the CAD viewer.</p>

<p><img src="http://xeolabs.com/images/gear.gif" alt="" /></p>

<h1 id="contents">Contents</h1>

<ul>
  <li><a href="#the-client">The Client</a></li>
  <li><a href="#requirements">Requirements</a></li>
  <li><a href="#solution">Solution</a>
    <ul>
      <li><a href="#3dxml">3DXML</a></li>
      <li><a href="#wireframe">Wireframe</a></li>
    </ul>
  </li>
</ul>

<h1 id="the-client">The Client</h1>

<p><strong><a href="https://www.solidcomponents.com">SolidComponents™</a></strong> is a company based in Halmstad, Sweden that provides an online catalog of 
engineering components. For each component, the catalog provides a static image, a table of attributes, and a downloadable 
<a href="https://en.wikipedia.org/wiki/3DXML">3DXML</a> CAD model that was originally created in SolidWorks.</p>

<h1 id="requirements">Requirements</h1>

<ul>
  <li>Create a WebGL-based viewer for users to interactively view the 3D model of each product in the catalog</li>
  <li>Render using realistic, physically-based materials</li>
  <li>Render wireframe and transparent views</li>
</ul>

<!-- SolidComponents had already made some experimental viewers on THREE.js to load STL and OBJ files exported from SolidWorks, but  -->
<!-- was having difficulty getting the final appearance of the models right using those file formats. -->
<p><!-- <br><br>One of the the trickiest things  -->
<!-- was correctly smooth shading the models, since the face-aligned STL normals are useless for smooth shading, and the  -->
<!-- vertex-aligned OBJ normals often caused hard edges to appear incorrectly smooth.   --></p>

<h1 id="solution">Solution</h1>

<h3 id="using-xeogl">Using xeogl</h3>

<p>I implemented the SolidComponents CAD viewer as a wrapper class around <strong><a href="http://xeogl.org">xeogl</a></strong>, an open source 
WebGL library I created for 3D visualization.
<br /><br />
<img src="http://xeolabs.com/images/solidcomponents/uml.png" alt="" /></p>

<h3 id="dxml">3DXML</h3>

<p>I chose to make the viewer load the downloadable 3DXML model itself, rather than load some other format from SolidWorks, such 
as STL or OBJ. This way, we’re guaranteed to have a rendition that closely matches the way the 3DXML model looks in 
SolidWorks. Also, STL and OBJ were not able to express the same materials that we would see in the 3DXML. 
<br /><br />
A nice feature of 3DXML is that all the files that comprise the model (ie. scene, geometry and material descriptors) are 
packed into a single ZIP archive that can be loaded in a single HTTP request. Internally, the viewer then unpacks the files within 
the ZIP archive, converts the XML to JSON, and then parses the JSON using a recursive descent parser, to create the various 
3D objects within the xeogl scene graph.</p>

<h3 id="wireframe">Wireframe</h3>

<p>Often, a 3DXML file contains multiple representations of a model, such as solid-shaded and wireframe. In this 
case, however, we could only rely on it to contain a solid triangle mesh representation. Therefore, for wireframe views, 
I’m relying on xeogl to auto-generate the wireframe representation from the triangle mesh.</p>

<blockquote>
  <p>For each geometry, xeogl creates a second wireframe mesh that contains the edges between adjacent triangles whose surface 
normals deviate from each other by a given threshold, ie. the “hard” edges. This technique eliminates the “inner” edges, 
which are edges shared by triangles that are part of the same faces.</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th><img src="http://xeolabs.com/images/solidcomponents/innerEdges.png" alt="" /></th>
      <th><img src="http://xeolabs.com/images/solidcomponents/innerEdgesRemoved.png" alt="" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Wireframe with inner edges</td>
      <td>Inner edges eliminated</td>
    </tr>
  </tbody>
</table>

<p>(work-in-progress)</p>

<!-- #### STL models -->

<!-- Initially, I experimented with loading the **[STL](https://en.wikipedia.org/wiki/STL_(file_format))** format, which is also exported by SolidWorks. -->
<!-- <br><br> -->
<!-- ![](http://xeolabs.com/images/solidcomponents/gearWhiteBG.png) -->

<!-- Triangles in STL are disjoint, where each triangle has its own separate vertex positions, normals and  -->
<!-- (optionally) colors. This means that you can have gaps between triangles. Normals for each triangle are perpendicular to the triangle's surface, which gives the model a  -->
<!-- faceted appearance by default. The smoothNormals flag causes the STLModel to recalculate its normals, so that each normal's  -->
<!-- direction is the average of the orientations of the triangles adjacent to its vertex. When smoothing, each vertex normal  -->
<!-- is set to the average of the orientations of all other triangles that have a vertex at the same position, excluding those  -->
<!-- triangles whose direction deviates from the direction of the vertice's triangle by a threshold given in smoothNormalsAngleThreshold.  -->
<!-- This makes smoothing robust for hard edges.  -->

<!-- Normals in STL are face-aligned for a  -->
<!-- flat-shaded appearance, so I ignored them and relied on xeogl to auto-generate them per-vertex. To handle hard edges  -->
<!-- correctly, I extended xeogl's auto-generation to -->

<!-- #### OBJ Models -->

<!-- The client had previously made an experimental viewer on THREE.js that loaded OBJ exported by SolidWorks. However, OBJ contained  -->
<!-- vertex normals that rendered every edge as smooth-shaded, even when it was "hard" and should have rendered with a  -->
<!-- crease. -->
<!-- <br><br> -->
<p><!--  --></p>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://xeolabs.com/images/avatar.jpg" class="bio-photo" alt="xeolabs bio photo"></a>
<h3><a href="http://xeolabs.com/about/">xeolabs</a></h3>
<p><b>Lindsay Kay</b><br><br><i>3D software engineer / WebGL developer</i></p>
<a href="http://twitter.com/xeolabs" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="http://linkedin.com/in/lindsaystanleykay" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="http://github.com/xeolabs" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>
<br>
<hr>
<p style="text-align: center;"><a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf"><img style="text-align: center; width: 80%;" src="http://xeolabs.com/images/scenejs/OpenGLInsights2.jpg"></a><br>
    <i>My chapter on <a href="http://scenejs.org">SceneJS</a> for OpenGL Insights is now <a href="http://xeolabs.com/pdfs/OpenGLInsights.pdf">free to download!</a></i></p>

        </div>
        <p class="byline"><strong>SolidComponents™ Online CAD Viewer</strong> was published on <time datetime="2018-06-11T00:00:00+00:00" itemprop="datePublished">June 11, 2018</time> and last modified on <time datetime="2018-07-31" itemprop="dateModified">July 31, 2018</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="http://xeolabs.com/about" title="About xeolabs" itemprop="url">xeolabs</a></span></span>.</p>
      </footer>

        <!---->
        <!--<br><br>-->
        <!--<div id="disqus_thread"></div>-->
        <!--<script type="text/javascript">-->
            <!--/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */-->
            <!--var disqus_shortname = 'xeographics'; // required: replace example with your forum shortname-->

            <!--/* * * DON'T EDIT BELOW THIS LINE * * */-->
            <!--(function() {-->
                <!--var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;-->
                <!--dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';-->
                <!--(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);-->
            <!--})();-->
        <!--</script>-->
        <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
        <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
        <!---->
    </div><!-- /.article-wrap -->
  </article>

</div><!-- /#main -->


<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://xeolabs.com/articles">View all articles</a>)</small></h4>
    <ul>
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/xeokit" title="xeokit - 3D SDK for Web-based BIM and CAD">xeokit - 3D SDK for Web-based BIM and CAD</a></li>
      
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/biodigital-human" title="The BioDigital Human™">The BioDigital Human™</a></li>
      
    
      
      
      
      <li><a href="http://xeolabs.com/portfolio/bimdata" title="BIMData™ Online 3D BIM Viewer">BIMData™ Online 3D BIM Viewer</a></li>
      
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    <span>&copy; 2019 xeolabs. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery-1.9.1.min.js"></script>-->
<!--<script src="http://xeolabs.com/assets/js/vendor/jquery.gifplayer.js"></script>-->
<!--<link rel="stylesheet" href="http://xeolabs.com/assets/css/gifplayer.css" />-->
<!--<script src="http://xeolabs.com/assets/js/scripts.min.js"></script>-->


<!--<script>-->
    <!--$(document).ready( function(){-->
        <!--$('.gifplayer').gifplayer();-->
    <!--});-->
<!--</script>-->



</body>
</html>
